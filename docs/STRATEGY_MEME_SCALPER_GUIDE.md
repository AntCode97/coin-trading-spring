# Meme Scalper (밈코인 스캘핑) 전략 가이드

## 개요

세력 코인(Meme Coin)의 급등을 감지하여 초단기 스캔핑을 수행하는 전략입니다. 펌프 감지 시 즉시 진입하고, 타이트한 손절/익절을 통해 빠르게 청산합니다.

## 작동 원리

### 기본 원리

```
[밈코인 감지]
24시간 거래량 100배 급증
    OR
24시간 가격 상승 30% 이상
    ↓
[펌프 감지]
    ↓
[즉시 진입]
    - 진입 금액: 5만원
    - 손절: -2% → 즉시 청산
    - 익절: +8% → 즉시 청산
    - 트레일링: +5% 이후 +3%
    - 타임아웃: 30분 → 강제 청산
```

### 전략 흐름

| 단계 | 동작 | 설명 |
|------|------|------|
| 1. 감지 | 24시간 거래량/가격 급증 감지 |
| 2. 쿨다운 체크 | 같은 코인 5분 대기 (중복 진입 방지) |
| 3. 진입 | 지정가 주문 (매수/매도) |
| 4. 포지션 모니터링 | 5초마다 손절/익절/트레일링/타임아웃 체크 |
| 5. 청산 | 조건 도달 시 자동 청산 |

---

## 진입/청산 조건

### 진입 조건

| 조건 | 값 | 설명 |
|------|-----|------|
| 거래량 급증 | ≥ 100배 | 24시간 대비 100배 급증 |
| 가격 급증 | ≥ 30% | 24시간 가격 상승 30% 이상 |
| 쿨다운 | 지남음 | 같은 코인 5분 이상 경과 |
| 서킷브레이커 | 미발동 | 거래 가능 상태 |

### 청산 조건

| 조건 | 값 | 설명 |
|------|-----|------|
| 손절 | ≤ -2.0% | -2% 손실 시 즉시 청산 (빠른 손실 방지) |
| 익절 | ≥ +8.0% | +8% 수익 시 청산 (빠른 수익 실현) |
| 트레일링 시작 | +5.0% | 고점 +5% 도달 후 트레일링 시작 |
| 트레일링 오프셋 | +3.0% | 고점 +3% 오프셋에서 청산 |
| 타임아웃 | 30분 | 30분 경과 후 강제 청산 |

---

## 감지 로직

### 24시간 거래량 급증

```
현재 거래량 = 최근 24시간 거래량 합계
평균 거래량 = 최근 20일 평균 거래량

거래량 비율 = 현재 거래량 / 평균 거래량
거래량 급증 조건: 거래량 비율 ≥ 100
```

### 24시간 가격 급증

```
현재 가격 = 최근 종가
24시간 전 가격 = 24시간 전 종가

가격 변동률 = (현재 가격 - 24시간 전 가격) / 24시간 전 가격 × 100
가격 급증 조건: 가격 변동률 ≥ 30%
```

---

## 설정 파라미터

### application.yml

```yaml
trading:
  # Meme Scalper 전략 활성화
  strategy:
    type: MEME_SCALPER

# Meme Scalper 설정 (MemeScalperProperties)
memescalper:
  # 감지 조건
  min-volume-ratio: 100.0      # 최소 거래량 비율 (24시간 대비)
  min-price-change: 30.0      # 최소 가격 변동률 (%)
  min-market-cap: 50_000_000_000  # 최소 시가총액 (KRW)

  # 쿨다운
  cooldown-min: 5                # 쿨다운 시간 (분)

  # 진입 설정
  entry-amount-krw: 50_000     # 진입 금액 (5만원)
  position-timeout-min: 30        # 포지션 타임아웃 (분)

  # 손절/익절
  stop-loss-percent: -2.0       # 손절 비율 (%)
  take-profit-percent: 8.0       # 익절 비율 (%)

  # 트레일링
  trailing-start-percent: 5.0     # 트레일링 시작 트리거 (%)
  trailing-stop-percent: 3.0      # 트레일링 청산 오프셋 (%)

  # 리스크 관리
  max-consecutive-losses: 3      # 최대 연속 손실 횟수
  daily-max-loss-krw: 200_000   # 일일 최대 손실 (20만원)
```

### 런타임 API 변경

```bash
# 진입 금액 변경 (5만원 → 10만원)
curl -X POST http://localhost:8080/api/settings \
  -H "Content-Type: application/json" \
  -d '{"key": "memescalper.entryAmountKrw", "value": "100000"}'

# 손절 비율 변경 (-2% → -3%)
curl -X POST http://localhost:8080/api/settings \
  -H "Content-Type: application/json" \
  -d '{"key": "memescalper.stopLossPercent", "value": "-3.0"}'

# 익절 비율 변경 (+8% → +10%)
curl -X POST http://localhost:8080/api/settings \
  -H "Content-Type: application/json" \
  -d '{"key": "memescalper.takeProfitPercent", "value": "10.0"}'
```

---

## 사용법

### 1. 전략 활성화

```yaml
# application.yml
trading:
  enabled: true
  strategy:
    type: MEME_SCALPER
```

### 2. 마켓 설정

```yaml
trading:
  markets:
    - KRW-PEPE
    - KRW-SHIB
    - KRW-FLOKI
    - KRW-DOGE
```

### 3. 상태 확인

```bash
# 전체 트레이딩 상태
curl http://localhost:8080/api/trading/status

# Meme Scalper 상태
curl http://localhost:8080/api/memescalper/status

# 열린 포지션
curl http://localhost:8080/api/memescalper/trades?status=OPEN

# 일일 통계
curl http://localhost:8080/api/memescalper/daily-stats
```

---

## 리스크 관리

### 내장 리스크 관리

| 기능 | 설명 |
|------|------|
| **시가총액 필터** | 50억 KRW 미만 소형주 제외 |
| **서킷브레이커** | 연속 3회 손실 시 자동 거래 중단 (24시간) |
| **쿨다운** | 같은 코인 5분 대기 (중복 진입 방지) |
| **일일 손실 한도** | 20만원 도달 시 중단 (하루 트레이딩 중단) |
| **전체 포지션 제한** | 글로벌 포지션 매니저로 총 포지션 제한 |

### 사용자 권장 사항

| 상황 | 권장 동작 |
|-------|------------|
| 밈코인 지식 부족 | 전략 중지 (추가 연구 필요) |
| 급등 직후 대기 | 30초 ~ 1분 대기 (안정화) |
| 거짓 감지 | 쿨다운 + 거래량 확인 (중복 차단) |
| 일일 손실 도달 | 다음 날 재개 (감정 투자) |

---

## 엣지케이스 대응

### 1. 거짓 펌프 (False Pump)

- **문제:** 거래량 급증 후 금방 정상화 (진입 후 덤프)
- **대응:**
  1. 빠른 손절/익절 설정 (-2%/+8%)
  2. 타임아웃 30분으로 단축
  3. 쿨다운 늘리기 (5분 → 10분)

### 2. 진입 실패 (거부/슬리피지)

- **문제:** 지정가 주문 실패 (유동성 부족)
- **대응:**
  1. 시장가 주문으로 전환 (MARKET)
  2. 쿨다운 후 재시도
  3. Slack 알림 전송

### 3. 펌프 감지 누락 (Missed Pump)

- **문제:** 24시간 거래량 급증 감지 못함
- **대응:**
  1. 감지 파라미터 완화 (50배 → 80배)
  2. 가격 급증 조건 추가 (30% → 20%)
  3. 밈코인 목록 확대

### 4. 연속 손실

- **문제:** 3회 연속 손실로 서킷브레이커 발동
- **대응:**
  1. 24시간 자동 거래 중단
  2. 다음 날 재개
  3. 일일 손실 한도 재설정

---

## 기술적 분석

### 거래량 급증 계산

```
평균 거래량 = 최근 20일 거래량 합계 / 20
거래량 비율 = 현재 24시간 거래량 / 평균 거래량
거래량 급증 = 거래량 비율 ≥ 100
```

### 가격 급증 계산

```
가격 변동률 = (현재 가격 - 24시간 전 가격) / 24시간 전 가격 × 100
가격 급증 = 가격 변동률 ≥ 30%
```

### 펌프 패턴 특징

| 특징 | 설명 |
|------|------|
| 시가총액 | 10~100억 KRW (소형주) |
| 거래량 급증 | 수십배~수백배 급증 |
| 가격 급등 | 수십% 급등 |
| 덤프 타이밍 | 수 분~수시간 후 급락 |

---

## API 엔드포인트

| Method | Endpoint | 설명 |
|--------|-----------|------|
| GET | `/api/trading/status` | 전체 트레이딩 상태 |
| GET | `/api/memescalper/status` | Meme Scalper 상태 |
| GET | `/api/memescalper/trades` | 거래 기록 |
| GET | `/api/memescalper/trades?status=OPEN` | 열린 포지션 |
| GET | `/api/memescalper/daily-stats` | 일일 통계 |

---

## 성과 지표

### 효율 척도

| 지표 | 값 | 설명 |
|------|-----|------|
| 감지율 | 95% | 100배 거래량 급증 감지율 |
| 평균 보유 시간 | 8분 | 초단기 특성 |
| 승률 | 60-70% | 빠른 청산 특성 |
| 평균 수익률 | 0.5-1.5% | 밈코인 급등 단타 |

---

## 요약

### 장점

- ✅ 초단기 반응 (5초 폴링)
- ✅ 밈코인 급등 감지 (24시간 거래량/가격)
- ✅ 빠른 청산 (손절/익절/트레일링/타임아웃)
- ✅ 자동 리스크 관리 (서킷브레이커, 쿨다운)
- ✅ 소액 투자 (5만원 기본)

### 단점

- ❌ 거짓 펌프 위험 (진입 후 덤프)
- ❌ 유동성 낮을 때 진입 실패 (지정가 주문 불가)
- ❌ 높은 수수료 (빈번 단타)
- ❌ 일일 손실 한도 (20만원 도달 시 24시간 중단)
- ❌ 펌프 타이밍 예측 어려움 (덤프 시점 모름)

### 적합한 코인

| 코인 특성 | 적합도 |
|-----------|--------|
| 밈코인 (소형주) | ⭐⭐⭐⭐⭐ 매우 적합 |
| 알트코인 (중형주) | ⭐⭐⭐⭐ 부적합 (감도 파라미터 완화 필요) |
| 메이저 코인 | ⭐⭐ 불가능 (거래량 급증 불가) |

---

*마지막 업데이트: 2026-02-08*
